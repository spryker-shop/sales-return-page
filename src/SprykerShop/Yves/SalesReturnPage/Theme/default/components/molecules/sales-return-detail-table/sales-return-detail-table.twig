{% extends model('component') %}

{% define config = {
    name: 'sales-return-detail-table',
} %}

{% define data = {
    returnItems: [],
    currencyIsoCode: null
} %}

{% block body %}
    <div class="{{ config.name }}__content col col--sm-12 col--md-12">

        {% for returnItem in data.returnItems %}
            {% set orderItem = returnItem.orderItem %}

            <div class="{{ config.name }}__content col col--sm-12 col--md-12">
                {{ 'sales_return.order_reference' | trans }}:
                <strong>{{ orderItem.orderReference }}</strong>
            </div>
            <div class="{{ config.name }}__content col col--sm-12 col--md-12">
                <div class="{{ config.name }}__col col col--middle col--sm-3">
                    {% include atom('thumbnail') with {
                        modifiers: ['small'],
                        attributes: {
                            src: orderItem.metadata.image,
                        },
                    } only %}
                </div>

                <div class="col col--sm-9">
                    <div class="col col--sm-3">
                        <span class="spacing-right ">{{ orderItem.name }}</span>
                        <br/>

                        <span class="spacing-right "><small>{{ 'product.attribute.sku' | trans }}: {{ orderItem.sku }}</small></span>
                        <br />

                        {% if orderItem.productOptions is not empty %}
                            <div class="spacing-bottom">
                                {% block detailRow %}
                                    {{ 'customer.order.options' | trans }}
                                    <ul>
                                        {% for productOption in orderItem.productOptions %}
                                            <li>
                                                &nbsp; + {{ productOption.value | trans }}
                                                <strong>{{ productOption.sumPrice | money(true, data.currencyIsoCode) }}</strong>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% endblock %}
                            </div>
                        {% endif %}
                        <br />

                        <span class="spacing-right "><small>{{ 'return.return_reasons.title' | trans }}: {{ returnItem.reason }}</small></span>
                    </div>

                    <div class="col col--sm-2">
                        <span class="spacing-right ">{{ orderItem.state.name }}</span>
                    </div>

                    <div class="col col--sm-3">
                        <strong class="col col--sm-3 text-right">{{ orderItem.sumSubtotalAggregation | money(true, data.currencyIsoCode) }}</strong>
                    </div>

                    <div class="col col--sm-2">
                        <p>x {{ orderItem.quantity }}</p>
                    </div>

                    {% if orderItem.sumPrice %}
                        <div class="col col--sm-2">
                            <p>{{ orderItem.sumPrice | money(true, data.currencyIsoCode) }}</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            <hr class="box__separator">
        {% endfor %}
    </div>
{% endblock %}
