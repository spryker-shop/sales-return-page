{% extends model('component') %}

{% define config = {
    name: 'return-product-item',
} %}

{% define data = {
    item: required,
} %}

{% set checkboxColumnClass = 'col col--middle col--sm-2' %}
{% set productItemColumnClass = 'col col--sm-10 grid' %}

{% block body %}
    {% block checkboxColumn %}
        <div class="{{ checkboxColumnClass }}">
            {% block checkboxColumnInner %}
                {% include atom('thumbnail') with {
                    modifiers: ['small'],
                    attributes: {
                        src: data.item.metadata.image,
                    },
                } only %}
            {% endblock %}
        </div>
    {% endblock %}

    {% block productItemColumn %}
        <div class="{{ productItemColumnClass }}">
            {% set productInfoColumnClass = 'col col--sm-4' %}
            {% set productStatusColumnClass = 'col col--sm-2 text-center' %}
            {% set productPriceColumnClass = 'col col--sm-2 text-center' %}
            {% set productQuantityColumnClass = 'col col--sm-2 text-center' %}
            {% set productPriceTotalColumnClass = 'col col--sm-2 text-center' %}

            {% block productItemColumnInner %}
                {% block productItemInfo %}
                    <div class="{{ productInfoColumnClass }}">
                        {% block productItemInfoInner %}
                            {% block productItemReturnableDate %}
                                <div>
                                    {{ 'return_page.returnable_text' | trans }}
                                </div>
                            {% endblock %}

                            {% if not data.item.isReturnable %}
                                {% block productItemReturnableInfo %}
                                    <div>
                                        {{ 'return_page.returnable_state' | trans }}
                                    </div>
                                {% endblock %}
                            {% endif %}

                            {% block productItemName %}
                                <h6>
                                    {{ data.item.name }}
                                </h6>
                            {% endblock %}

                            {% set skuClass = 'text-secondary' %}

                            {% block productItemSku %}
                                <small class="{{ skuClass }}">
                                    {{ 'return_page.item_sku' | trans }} {{ data.item.sku }}
                                </small>
                            {% endblock %}

                            {% if data.item.productOptions is not empty %}
                                <div class="spacing-bottom">
                                    {% block detailRow %}
                                        {{ 'customer.order.options' | trans }}
                                        <ul>
                                            {% for productOption in data.item.productOptions %}
                                                <li>
                                                    &nbsp; + {{ productOption.value | trans }}
                                                    <strong>{{ productOption.sumPrice | money(true, data.item.currencyIsoCode) }}</strong>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% endblock %}
                                </div>
                            {% endif %}
                        {% endblock %}
                    </div>
                {% endblock %}

                {% set itemState = data.item.state.name | replace({' ': '-'}) | lower %}

                {% block productState %}
                    <div class="{{ productStatusColumnClass }}">
                        {% if itemState %}
                            {% block state %}
                                {% include molecule('status') with {
                                    data: {
                                        label: ('oms.state.' ~ itemState) | trans,
                                        status: itemState,
                                    },
                                } only %}
                            {% endblock %}
                        {% else %}
                            {% block emptyState %}
                                <span class="text-secondary">
                                    --
                                </span>
                            {% endblock %}
                        {% endif %}
                    </div>
                {% endblock %}

                {% block productItemPrice %}
                    <strong class="{{ productPriceColumnClass }}">{{ data.item.unitPrice | money(true, data.item.currencyIsoCode) }}</strong>
                {% endblock %}

                {% block productItemQuantity %}
                    <div class="{{ productQuantityColumnClass }}">
                        {{ 'return_page.quantity' | trans }} {{ data.item.quantity }}
                    </div>
                {% endblock %}

                {% block productItemTotalPrice %}
                    <strong class="{{ productPriceTotalColumnClass }}">{{ data.item.sumPriceToPayAggregation | money(true, data.item.currencyIsoCode) }}</strong>
                {% endblock %}
            {% endblock %}
        </div>
    {% endblock %}
{% endblock %}
